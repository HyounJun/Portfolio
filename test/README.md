# 📊 E-Commerce 사용자 행동 데이터 분석 프로젝트

> 2019년 12월 온라인 쇼핑몰 사용자 행동 로그 데이터를 활용한 종합 데이터 분석

## 🎯 프로젝트 개요

### 분석 목적
온라인 쇼핑몰의 고객 행동 패턴을 분석하여 매출 증대와 고객 경험 개선을 위한 인사이트 도출

### 데이터 정보
- **데이터셋**: ecommerce_events.2019_dec
- **기간**: 2019년 12월 (1개월)
- **레코드 수**: 3,533,286건
- **사용자 수**: 358,212명

### 데이터 구조
| 컬럼명 | 타입 | 설명 |
|--------|------|------|
| event_time | VARCHAR(50) | 이벤트 발생 시간 |
| event_type | VARCHAR(20) | 이벤트 유형 (view, cart, purchase, remove_from_cart) |
| product_id | INT | 제품 ID |
| category_id | BIGINT | 카테고리 ID |
| category_code | VARCHAR(100) | 카테고리 코드 |
| brand | VARCHAR(50) | 브랜드명 |
| price | DECIMAL(10,2) | 가격 |
| user_id | INT | 사용자 ID |
| user_session | VARCHAR(50) | 세션 ID |

---

## 🛠 사용 기술

- **데이터베이스**: MySQL 8.0
- **언어**: Python 3.14, SQL
- **라이브러리**: pymysql, pandas
- **분석 기법**: 퍼널 분석, 코호트 분석, 리텐션 분석, 시계열 분석

---

## 📈 주요 분석 내용

### 1️⃣ 퍼널 분석 (Funnel Analysis)

**목표**: 고객의 구매 전환 과정 파악 및 이탈 지점 발견

#### 분석 결과

```
조회 (View)         358,212명  (100.0%)
    ↓
장바구니 (Cart)      83,458명   (23.3%)  ← 76.7% 이탈
    ↓
구매 (Purchase)      25,613명   (7.2%)   ← 69.3% 이탈
```

#### 핵심 인사이트
- **전체 구매 전환율**: 7.2% (업계 평균 2-3%보다 높음)
- **장바구니 → 구매 전환율**: 30.7%
- **문제점**: 76.7%의 고객이 장바구니에도 담지 않고 이탈

#### 전환율 높은 브랜드 TOP 3
| 브랜드 | 조회수 | 구매수 | 전환율 |
|--------|--------|--------|--------|
| Severina | 4,423 | 1,550 | 35.04% |
| Farmstay | 1,769 | 578 | 32.67% |
| Swarovski | 2,544 | 790 | 31.05% |

---

### 2️⃣ 리텐션 분석 (Customer Retention Analysis)

**목표**: 고객 충성도 파악 및 VIP/단골/일회성 고객 세분화

#### 고객 세그먼트 분석

| 고객 유형 | 고객 수 | 평균 구매 횟수 | 평균 구매 금액 | 매출 기여 |
|-----------|---------|----------------|----------------|-----------|
| 일회성 고객 | 2,910명 (11.4%) | 1.0회 | $26.50 | $77,105 (7.2%) |
| 일반 고객 | 10,379명 (40.5%) | 3.4회 | $24.26 | $251,753 (23.4%) |
| 단골 고객 | 12,324명 (48.1%) | 14.2회 | $60.76 | $748,766 (69.5%) |

#### 핵심 인사이트
- **단골 고객의 파워**: 전체의 48.1%가 매출의 69.5% 차지
- **재구매율**: 88.6% (매우 높은 수준)
- **VIP 고객**: 상위 1% 고객이 평균 $850 이상 구매
- **평균 재구매 주기**: 0.1일 (당일 재구매 빈번)

#### VIP 고객 TOP 3
| 사용자 ID | 구매 횟수 | 총 구매 금액 | 평균 구매 금액 |
|-----------|-----------|--------------|----------------|
| 575709540 | 399회 | $1,526.73 | $3.83 |
| 565036131 | 126회 | $1,443.94 | $11.46 |
| 586168240 | 187회 | $1,240.67 | $6.63 |

---

### 3️⃣ 시간대별 구매 패턴 분석

**목표**: 마케팅 최적 시간대 발견

#### 구매가 가장 많은 시간대 TOP 5

| 순위 | 시간대 | 구매 건수 | 전환율 |
|------|--------|-----------|--------|
| 1 | 오전 11시 | 14,850건 | 14.67% |
| 2 | 오전 10시 | 13,894건 | 14.11% |
| 3 | 낮 12시 | 13,138건 | 12.89% |
| 4 | 오전 9시 | 12,642건 | 13.52% |
| 5 | 오후 1시 | 12,455건 | 12.33% |

#### 요일별 구매 패턴

| 요일 | 구매 수 | 평균 구매 금액 |
|------|---------|----------------|
| 월요일 | 37,171건 | $5.05 |
| 화요일 | 34,463건 | $5.04 |
| 수요일 | 32,250건 | $5.05 |
| 일요일 | 30,429건 | $5.08 |

#### 핵심 인사이트
- **골든 타임**: 오전 10-12시 (전환율 14% 이상)
- **최저 시간대**: 새벽 4시, 저녁 7시 (전환율 10%)
- **요일 효과**: 월요일 구매가 가장 많음, 주말은 상대적으로 적음

---

### 4️⃣ 장바구니 이탈 분석

**목표**: 장바구니 이탈 원인 파악 및 개선점 도출

#### 이탈 현황
- **장바구니 담은 사용자**: 83,458명
- **실제 구매 사용자**: 25,613명
- **이탈률**: **69.3%** 🚨

#### 가격대별 이탈률

| 가격대 | 장바구니 | 구매 완료 | 전환율 | 이탈률 |
|--------|----------|-----------|--------|--------|
| $0-5 | 644,271 | 148,859 | 23.1% | 76.9% |
| $5-10 | 190,015 | 43,019 | 22.6% | 77.4% |
| $20-50 | 19,461 | 4,177 | 21.5% | 78.5% |
| $50-100 | 4,721 | 955 | 20.2% | 79.8% |
| **$100+** | 1,812 | 288 | 15.9% | **84.1%** |

#### 이탈률 높은 브랜드 TOP 5

| 브랜드 | 장바구니 | 구매 | 이탈률 |
|--------|----------|------|--------|
| Lador | 1,214 | 193 | 84.1% |
| Strong | 720 | 120 | 83.3% |
| Balbcare | 598 | 100 | 83.3% |
| Dermal | 645 | 112 | 82.6% |
| Dartnails | 4,952 | 872 | 82.4% |

#### 핵심 인사이트
- **가격 민감도**: 가격이 높을수록 이탈률 증가
- **장바구니 삭제**: 664,655건 (전체 장바구니의 71.7%)
- **문제 제품**: Grattol 브랜드 제품 3개가 삭제 TOP 10에 포함

---

## 💡 비즈니스 제안 및 기대 효과

### 1. 퍼널 최적화 전략

#### 📌 제안 1: 조회 → 장바구니 전환율 개선
**현황**: 76.7% 이탈
**목표**: 이탈률 10% 감소 (66.7%)
**방법**:
- 인기 제품 메인 노출 강화
- 상품 상세 페이지 개선 (리뷰, 이미지)
- "장바구니에 담기" CTA 버튼 최적화

**기대 효과**:
```
추가 장바구니 사용자: 35,821명 × 10% = 3,582명
추가 구매 예상: 3,582명 × 30.7% = 1,099명
추가 매출: 1,099명 × $5 = $5,495
```

#### 📌 제안 2: 장바구니 → 구매 전환율 개선
**현황**: 69.3% 이탈
**목표**: 이탈률 50%로 감소
**방법**:
- 24시간 후 장바구니 리마인더 이메일 발송
- 10% 할인 쿠폰 제공
- 무료 배송 ($20 이상)
- 재고 부족 알림

**기대 효과**:
```
이탈 고객 회복: 57,845명 × 30% = 17,354명
추가 매출: 17,354명 × $5 = $86,770
```

---

### 2. 리텐션 강화 전략

#### 📌 제안 3: 일회성 고객 → 단골 전환
**타겟**: 2,910명 (일회성 고객)
**방법**:
- 첫 구매 후 7일 이내 20% 할인 쿠폰
- 개인화 추천 상품 이메일
- 로열티 프로그램 도입

**기대 효과**:
```
전환율 30% 가정: 2,910명 × 30% = 873명
추가 구매 (평균 10회): 873명 × 10회 × $5 = $43,650
```

#### 📌 제안 4: VIP 고객 관리 프로그램
**타겟**: 상위 1% (256명)
**방법**:
- VIP 전용 할인 (15%)
- 신제품 우선 구매권
- 전담 고객센터

**기대 효과**:
- 고객 생애 가치(LTV) 20% 증가
- 브랜드 충성도 향상

---

### 3. 시간대 맞춤 마케팅

#### 📌 제안 5: 골든 타임 마케팅
**방법**:
- **오전 10-12시**: 푸시 알림, 타임 세일
- **저녁 7-8시**: 장바구니 리마인더
- **월요일**: 주간 특가 상품 노출

**기대 효과**:
- 전환율 2-3% 증가
- 월간 추가 구매: 6,000건
- 월간 추가 매출: $30,000

---

### 4. 가격 전략 최적화

#### 📌 제안 6: 고가 제품 이탈 방지
**타겟**: $50 이상 제품 (이탈률 79.8-84.1%)
**방법**:
- 분할 결제 옵션
- "지금 구매하면 15% 할인" 긴급성 메시지
- 무료 배송 + 30일 환불 보장

**기대 효과**:
```
고가 제품 전환율 20% → 30% 개선
추가 구매: (1,812 + 4,721) × 10% = 653건
평균 단가 $75 가정: 653건 × $75 = $48,975
```

---

## 📊 종합 매출 증대 효과 시뮬레이션

| 전략 | 예상 추가 고객 | 예상 추가 매출 | ROI |
|------|----------------|----------------|-----|
| 퍼널 최적화 | 18,453명 | $92,265 | 300% |
| 일회성→단골 전환 | 873명 | $43,650 | 500% |
| 시간대 마케팅 | - | $30,000/월 | 250% |
| 고가 제품 최적화 | 653명 | $48,975 | 400% |
| **총계** | **19,979명** | **$214,890** | **360%** |

> 💰 **월간 추가 매출 예상**: $214,890
> 📈 **연간 추가 매출 예상**: $2,578,680

---

## 🔍 주요 SQL 쿼리

### 퍼널 분석 쿼리
```sql
-- 단계별 전환율 계산
SELECT
    event_type as 단계,
    COUNT(*) as 이벤트수,
    COUNT(DISTINCT user_id) as 사용자수,
    ROUND(COUNT(DISTINCT user_id) * 100.0 /
          (SELECT COUNT(DISTINCT user_id) FROM 2019_dec), 2) as 비율
FROM 2019_dec
GROUP BY event_type
ORDER BY 이벤트수 DESC;
```

### 리텐션 분석 쿼리
```sql
-- 고객 세그먼트별 매출 기여도
WITH customer_segments AS (
    SELECT
        user_id,
        COUNT(*) as 구매횟수,
        SUM(price) as 총구매금액,
        CASE
            WHEN COUNT(*) = 1 THEN '일회성 고객'
            WHEN COUNT(*) BETWEEN 2 AND 5 THEN '일반 고객'
            ELSE '단골 고객'
        END as 고객유형
    FROM 2019_dec
    WHERE event_type = 'purchase'
    GROUP BY user_id
)
SELECT
    고객유형,
    COUNT(*) as 고객수,
    ROUND(AVG(구매횟수), 1) as 평균구매횟수,
    ROUND(AVG(총구매금액), 2) as 평균총구매금액,
    ROUND(SUM(총구매금액), 2) as 전체매출기여
FROM customer_segments
GROUP BY 고객유형;
```

### 시간대별 전환율 쿼리
```sql
-- 시간대별 구매 패턴 및 전환율
SELECT
    HOUR(event_time) as 시간대,
    SUM(CASE WHEN event_type='view' THEN 1 ELSE 0 END) as 조회수,
    SUM(CASE WHEN event_type='purchase' THEN 1 ELSE 0 END) as 구매수,
    ROUND(SUM(CASE WHEN event_type='purchase' THEN 1 ELSE 0 END) * 100.0 /
          NULLIF(SUM(CASE WHEN event_type='view' THEN 1 ELSE 0 END), 0), 2) as 전환율
FROM 2019_dec
GROUP BY HOUR(event_time)
ORDER BY 전환율 DESC;
```

### 장바구니 이탈 분석 쿼리
```sql
-- 가격대별 장바구니 이탈률
SELECT
    CASE
        WHEN price < 5 THEN '$0-5'
        WHEN price < 10 THEN '$5-10'
        WHEN price < 20 THEN '$10-20'
        WHEN price < 50 THEN '$20-50'
        WHEN price < 100 THEN '$50-100'
        ELSE '$100+'
    END as 가격대,
    COUNT(CASE WHEN event_type='cart' THEN 1 END) as 장바구니추가,
    COUNT(CASE WHEN event_type='purchase' THEN 1 END) as 구매완료,
    ROUND(100 - (COUNT(CASE WHEN event_type='purchase' THEN 1 END) * 100.0 /
          NULLIF(COUNT(CASE WHEN event_type='cart' THEN 1 END), 0)), 1) as 이탈률
FROM 2019_dec
WHERE event_type IN ('cart', 'purchase')
GROUP BY 가격대;
```

---

## 🚀 실행 방법

### 1. 환경 설정
```bash
# Python 패키지 설치
pip install pymysql

# MySQL 연결 정보 확인
# Host: localhost
# Port: 3306
# User: root
# Password: 1234 또는 12345
```

### 2. 분석 실행
```bash
# 기본 테이블 정보 확인
python run_sql.py

# 퍼널 분석
python funnel_analysis.py

# 리텐션 분석
python retention_analysis.py

# 시간대 & 장바구니 분석
python time_cart_analysis.py
```

---

## 📌 핵심 성과 요약

### 데이터 분석 성과
✅ 350만 건 이상의 대용량 데이터 처리
✅ 4가지 주요 분석 수행 (퍼널, 리텐션, 시계열, 이탈)
✅ 20개 이상의 SQL 쿼리 작성
✅ Python 자동화 스크립트 4개 개발

### 비즈니스 임팩트
💰 월간 $214,890 추가 매출 기회 발견
📈 고객 전환율 개선 방안 6가지 도출
🎯 VIP 고객 256명 식별 및 관리 전략 수립
⏰ 마케팅 골든 타임 발견 (오전 10-12시)

### 핵심 인사이트
1. **단골 고객의 힘**: 48%의 고객이 70%의 매출 창출
2. **재구매율 88.6%**: 한 번 구매하면 대부분 다시 구매
3. **장바구니 이탈 69.3%**: 가장 큰 개선 기회
4. **가격 민감도**: 고가 제품일수록 이탈률 증가

